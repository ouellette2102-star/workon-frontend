{
  "meta": {
    "generated_at": "2024-12-26",
    "total_prs": 24,
    "priority_order": "security > stability > core_flows > ux"
  },
  "prs": [
    {
      "id": "PR-F04",
      "title": "SecureStorage: Persist auth tokens",
      "scope": ["lib/services/auth/auth_service.dart", "lib/services/auth/secure_storage.dart (create)", "pubspec.yaml"],
      "motivation": "Tokens are lost on app restart - users must re-login every time",
      "risk": "low",
      "rollback": "Remove secure_storage.dart, revert auth_service.dart changes",
      "tests": ["Verify token persists after app restart", "Verify logout clears stored token"],
      "estimation": {"optimistic": "2h", "realistic": "4h", "prudent": "6h"},
      "dependencies": [],
      "priority": 1
    },
    {
      "id": "PR-F03",
      "title": "Token refresh mechanism",
      "scope": ["lib/services/auth/auth_service.dart", "lib/services/auth/real_auth_repository.dart", "lib/services/api/api_client.dart"],
      "motivation": "Expired tokens cause 401 errors with no recovery",
      "risk": "med",
      "rollback": "Revert all three files",
      "tests": ["Verify refresh on 401", "Verify logout on refresh failure"],
      "estimation": {"optimistic": "3h", "realistic": "6h", "prudent": "8h"},
      "dependencies": ["PR-F04"],
      "priority": 2
    },
    {
      "id": "PR-F01",
      "title": "Reset password: Wire to backend API",
      "scope": ["lib/client_part/reset_password/reset_password_widget.dart", "lib/services/auth/auth_service.dart", "lib/services/auth/real_auth_repository.dart"],
      "motivation": "Reset password flow is UI-only, users cannot recover accounts",
      "risk": "low",
      "rollback": "Revert widget and service changes",
      "tests": ["Request reset email", "Verify code", "Set new password"],
      "estimation": {"optimistic": "3h", "realistic": "5h", "prudent": "8h"},
      "dependencies": [],
      "priority": 3
    },
    {
      "id": "PR-F08",
      "title": "Missions API integration",
      "scope": ["lib/services/missions/mission_service.dart (create)", "lib/services/missions/mission_repository.dart (create)", "lib/services/missions/mission_models.dart (create)"],
      "motivation": "Core business flow - workers need to see and accept missions",
      "risk": "med",
      "rollback": "Delete new service files",
      "tests": ["Fetch nearby missions", "Accept mission", "Complete mission"],
      "estimation": {"optimistic": "6h", "realistic": "10h", "prudent": "16h"},
      "dependencies": ["PR-F04"],
      "priority": 4
    },
    {
      "id": "PR-F08b",
      "title": "Missions UI wiring (worker flow)",
      "scope": ["lib/client_part/home/home_widget.dart", "lib/client_part/booking_details/booking_details_widget.dart"],
      "motivation": "Connect mission service to existing UI screens",
      "risk": "low",
      "rollback": "Revert UI files",
      "tests": ["See missions on home", "View mission details", "Accept mission from UI"],
      "estimation": {"optimistic": "4h", "realistic": "6h", "prudent": "10h"},
      "dependencies": ["PR-F08"],
      "priority": 5
    },
    {
      "id": "PR-F22",
      "title": "Provider registration API integration",
      "scope": ["lib/provider_part/provider_registration/provider_registration_widget.dart", "lib/services/user/user_service.dart"],
      "motivation": "Providers cannot onboard to the platform",
      "risk": "low",
      "rollback": "Revert widget changes",
      "tests": ["Submit provider registration", "Verify role update"],
      "estimation": {"optimistic": "3h", "realistic": "5h", "prudent": "8h"},
      "dependencies": ["PR-F04"],
      "priority": 6
    },
    {
      "id": "PR-F05",
      "title": "Profile update API integration",
      "scope": ["lib/client_part/profile_pages/edit_profile/edit_profile_widget.dart", "lib/services/user/user_service.dart"],
      "motivation": "Users cannot update their profile information",
      "risk": "low",
      "rollback": "Revert widget and service changes",
      "tests": ["Update name", "Update phone", "Update city"],
      "estimation": {"optimistic": "2h", "realistic": "4h", "prudent": "6h"},
      "dependencies": ["PR-F04"],
      "priority": 7
    },
    {
      "id": "PR-F10",
      "title": "Stripe integration: PaymentIntent flow",
      "scope": ["lib/services/payments/payment_service.dart (create)", "pubspec.yaml (stripe_sdk)", "lib/client_part/booking_pages/choose_payment_method/choose_payment_method_widget.dart"],
      "motivation": "Payments are non-functional - no revenue possible",
      "risk": "high",
      "rollback": "Remove payment_service.dart, revert pubspec.yaml",
      "tests": ["Create PaymentIntent", "Complete payment", "Handle failure"],
      "estimation": {"optimistic": "8h", "realistic": "14h", "prudent": "20h"},
      "dependencies": ["PR-F08"],
      "priority": 8
    },
    {
      "id": "PR-F23",
      "title": "Provider earnings/payout API integration",
      "scope": ["lib/provider_part/earnings/earnings_widget.dart", "lib/provider_part/transactions_provider/transactions_provider_widget.dart", "lib/services/payments/payout_service.dart (create)"],
      "motivation": "Providers cannot see or withdraw earnings",
      "risk": "med",
      "rollback": "Revert widget changes, delete payout_service.dart",
      "tests": ["View earnings", "View transaction history", "Initiate payout"],
      "estimation": {"optimistic": "6h", "realistic": "10h", "prudent": "14h"},
      "dependencies": ["PR-F10"],
      "priority": 9
    },
    {
      "id": "PR-F11",
      "title": "Messaging API integration",
      "scope": ["lib/services/messaging/message_service.dart (create)", "lib/client_part/chat/chat_widget.dart", "lib/client_part/messages/messages_widget.dart"],
      "motivation": "Workers and employers cannot communicate",
      "risk": "med",
      "rollback": "Delete message_service.dart, revert widgets",
      "tests": ["Load message thread", "Send message", "Mark as read"],
      "estimation": {"optimistic": "6h", "realistic": "10h", "prudent": "16h"},
      "dependencies": ["PR-F08"],
      "priority": 10
    },
    {
      "id": "PR-F12",
      "title": "Notifications API integration",
      "scope": ["lib/services/notifications/notification_service.dart (create)", "lib/client_part/notifications/notifications_widget.dart"],
      "motivation": "Users miss important updates about their missions/messages",
      "risk": "low",
      "rollback": "Delete notification_service.dart, revert widget",
      "tests": ["Load notifications", "Mark as read", "Mark all as read"],
      "estimation": {"optimistic": "4h", "realistic": "6h", "prudent": "10h"},
      "dependencies": ["PR-F04"],
      "priority": 11
    },
    {
      "id": "PR-F13",
      "title": "Ratings API integration",
      "scope": ["lib/services/ratings/rating_service.dart (create)", "lib/client_part/leave_review/leave_review_widget.dart", "lib/client_part/all_reviews/all_reviews_widget.dart"],
      "motivation": "Trust system not functional without ratings",
      "risk": "low",
      "rollback": "Delete rating_service.dart, revert widgets",
      "tests": ["Submit rating", "View ratings", "Calculate average"],
      "estimation": {"optimistic": "4h", "realistic": "6h", "prudent": "10h"},
      "dependencies": ["PR-F08"],
      "priority": 12
    },
    {
      "id": "PR-F09",
      "title": "Contracts API integration",
      "scope": ["lib/services/contracts/contract_service.dart (create)", "lib/client_part/booking_details/booking_details_widget.dart"],
      "motivation": "Mission contracts not functional",
      "risk": "low",
      "rollback": "Delete contract_service.dart, revert widget",
      "tests": ["View contract", "Sign contract", "Complete contract"],
      "estimation": {"optimistic": "4h", "realistic": "8h", "prudent": "12h"},
      "dependencies": ["PR-F08"],
      "priority": 13
    },
    {
      "id": "PR-F24",
      "title": "Address management API integration",
      "scope": ["lib/services/address/address_service.dart (create)", "lib/client_part/add_new_address/add_new_address_widget.dart", "lib/client_part/profile_pages/my_address/my_address_widget.dart"],
      "motivation": "Users cannot save addresses for missions",
      "risk": "low",
      "rollback": "Delete address_service.dart, revert widgets",
      "tests": ["Add address", "Edit address", "Delete address"],
      "estimation": {"optimistic": "3h", "realistic": "5h", "prudent": "8h"},
      "dependencies": ["PR-F05"],
      "priority": 14
    },
    {
      "id": "PR-F02",
      "title": "Social login: Google Sign-In",
      "scope": ["pubspec.yaml", "lib/services/auth/social_auth_service.dart (create)", "lib/client_part/sign_in/sign_in_widget.dart", "lib/client_part/sign_up/sign_up_widget.dart"],
      "motivation": "Many users prefer social login for convenience",
      "risk": "med",
      "rollback": "Remove social_auth_service.dart, revert widgets, revert pubspec.yaml",
      "tests": ["Google sign-in flow", "Link to existing account"],
      "estimation": {"optimistic": "6h", "realistic": "10h", "prudent": "16h"},
      "dependencies": ["PR-F04"],
      "priority": 15
    },
    {
      "id": "PR-F19",
      "title": "Rebrand Sparkly â†’ WorkOn",
      "scope": ["lib/**/*.dart (text replacements)", "assets/images/*.png"],
      "motivation": "App shows wrong brand name in multiple places",
      "risk": "low",
      "rollback": "Revert text changes",
      "tests": ["Verify all visible 'Sparkly' replaced with 'WorkOn'"],
      "estimation": {"optimistic": "2h", "realistic": "3h", "prudent": "5h"},
      "dependencies": [],
      "priority": 16
    },
    {
      "id": "PR-F17",
      "title": "Network error retry mechanism",
      "scope": ["lib/services/api/api_client.dart", "lib/services/api/retry_interceptor.dart (create)"],
      "motivation": "Network failures give no recovery option",
      "risk": "low",
      "rollback": "Delete retry_interceptor.dart, revert api_client.dart",
      "tests": ["Retry on timeout", "Max retries limit", "User cancel option"],
      "estimation": {"optimistic": "3h", "realistic": "5h", "prudent": "8h"},
      "dependencies": [],
      "priority": 17
    },
    {
      "id": "PR-F16",
      "title": "Empty states for list screens",
      "scope": ["lib/client_part/bookings/bookings_widget.dart", "lib/client_part/messages/messages_widget.dart", "lib/client_part/notifications/notifications_widget.dart", "lib/client_part/bookmarks/bookmarks_widget.dart"],
      "motivation": "Users see blank screens when no data exists",
      "risk": "low",
      "rollback": "Revert widget changes",
      "tests": ["Verify empty state displayed when list is empty"],
      "estimation": {"optimistic": "2h", "realistic": "4h", "prudent": "6h"},
      "dependencies": [],
      "priority": 18
    },
    {
      "id": "PR-F15",
      "title": "Password validation improvements",
      "scope": ["lib/client_part/sign_up/sign_up_widget.dart", "lib/client_part/reset_password/reset_password_widget.dart"],
      "motivation": "Weak passwords allowed, security risk",
      "risk": "low",
      "rollback": "Revert widget changes",
      "tests": ["Reject weak passwords", "Show requirements"],
      "estimation": {"optimistic": "1h", "realistic": "2h", "prudent": "3h"},
      "dependencies": [],
      "priority": 19
    },
    {
      "id": "PR-F18",
      "title": "Localize hardcoded French strings",
      "scope": ["lib/client_part/sign_in/sign_in_widget.dart", "lib/client_part/sign_up/sign_up_widget.dart", "lib/flutter_flow/internationalization.dart"],
      "motivation": "Error messages hardcoded, not translatable",
      "risk": "low",
      "rollback": "Revert changes",
      "tests": ["Verify all strings use FFLocalizations"],
      "estimation": {"optimistic": "1h", "realistic": "2h", "prudent": "4h"},
      "dependencies": [],
      "priority": 20
    },
    {
      "id": "PR-F06",
      "title": "Delete account API integration",
      "scope": ["lib/client_part/profile_pages/delete_account/delete_account_widget.dart", "lib/services/auth/auth_service.dart"],
      "motivation": "GDPR compliance - users must be able to delete accounts",
      "risk": "med",
      "rollback": "Revert widget and service changes",
      "tests": ["Confirm deletion", "Verify data removed"],
      "estimation": {"optimistic": "2h", "realistic": "4h", "prudent": "6h"},
      "dependencies": ["PR-F04"],
      "priority": 21
    },
    {
      "id": "PR-F07",
      "title": "Change email API integration",
      "scope": ["lib/client_part/profile_pages/change_email/change_email_widget.dart", "lib/services/user/user_service.dart"],
      "motivation": "Users cannot update email address",
      "risk": "low",
      "rollback": "Revert widget and service changes",
      "tests": ["Request email change", "Verify new email"],
      "estimation": {"optimistic": "2h", "realistic": "4h", "prudent": "6h"},
      "dependencies": ["PR-F05"],
      "priority": 22
    },
    {
      "id": "PR-F20",
      "title": "Biometric authentication",
      "scope": ["pubspec.yaml", "lib/services/auth/biometric_service.dart (create)", "lib/client_part/profile_pages/settings/settings_widget.dart"],
      "motivation": "Convenience and security for returning users",
      "risk": "low",
      "rollback": "Remove biometric_service.dart, revert pubspec.yaml",
      "tests": ["Enable biometric", "Authenticate with biometric"],
      "estimation": {"optimistic": "4h", "realistic": "6h", "prudent": "10h"},
      "dependencies": ["PR-F04"],
      "priority": 23
    },
    {
      "id": "PR-F21",
      "title": "Offline mode / data caching",
      "scope": ["pubspec.yaml", "lib/services/cache/cache_service.dart (create)", "lib/services/missions/mission_service.dart"],
      "motivation": "App unusable without internet connection",
      "risk": "med",
      "rollback": "Remove cache_service.dart, revert pubspec.yaml",
      "tests": ["View cached missions offline", "Queue actions for sync"],
      "estimation": {"optimistic": "8h", "realistic": "14h", "prudent": "20h"},
      "dependencies": ["PR-F08"],
      "priority": 24
    }
  ]
}

